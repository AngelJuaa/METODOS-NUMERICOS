<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Gauss-Seidel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
     <nav th:replace="/layout/template :: menu"> </nav>
            <div th:replace="/layout/template :: bannerunit3"></div>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/">Inicio</a></li>
                    <li class="breadcrumb-item"><a href="/unit3">Sistemas Lineales</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Gauss-Seidel</li>
                </ol>
            </nav>
    <h2 class="text-center mb-4">Método Gauss-Seidel</h2>
    
    <form th:action="@{/unit3/solvegaussSeidel}" th:object="${modelGaussSeidel}" method="post" class="card p-4 shadow rounded">

        <!-- Tamaño del sistema -->
        <div class="mb-3">
            <label for="MN" class="form-label">Tamaño del sistema (2, 3 o 4)</label>
            <input type="number" class="form-control" id="MN" th:field="*{MN}" min="2" max="4" required>
        </div>

        <!-- Botón para generar inputs dinámicos -->
        <div class="mb-3">
            <button type="button" step="any" class="btn btn-secondary" onclick="crearMatriz()">Generar matriz</button>
        </div>

        <!-- Contenedores dinámicos -->
        <div class="mb-3">
            <label class="form-label">Matriz de coeficientes (A)</label>
            <div id="ContenedorMatriz"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">Vector independiente (B)</label>
            <div id="ContenedorB"></div>
        </div>

        <div class="mb-3">
            <label class="form-label">Valores iniciales (x0)</label>
            <div id="ContenedorX0"></div>
        </div>

        <!-- Iteraciones y tolerancia -->
        <div class="mb-3">
            <label for="iteraciones" class="form-label">Número de iteraciones</label>
            <input type="number" class="form-control" id="iteraciones" th:field="*{iteraciones}" required>
        </div>

        <div class="mb-3">
            <label for="tolerancia" class="form-label">Tolerancia</label>
            <input type="number" step="0.0001" class="form-control" id="tolerancia" th:field="*{tolerancia}" required>
        </div>

        <div class="d-grid">
            <button type="submit" class="btn btn-primary">Resolver</button>
        </div>
    </form>
</div>

<script>
    function crearMatriz() {
        let n = parseInt(document.getElementById("MN").value);
        if (!n || n <= 0) return;

        let contA = document.getElementById("ContenedorMatriz");
        let contB = document.getElementById("ContenedorB");
        let contX0 = document.getElementById("ContenedorX0");
        contA.innerHTML = "";
        contB.innerHTML = "";
        contX0.innerHTML = "";

        for (let i = 0; i < n; i++) {
            let row = document.createElement("div");
            row.className = "row mb-2";
            contA.appendChild(row);

            for (let j = 0; j < n; j++) {
                let col = document.createElement("div");
                col.className = "col";
                let inp = document.createElement("input");
                inp.type = "number";
                inp.name = "matrizA";
                inp.step = "any";
                inp.className = "form-control";
                inp.placeholder = "a" + (i + 1) + (j + 1);
                col.appendChild(inp);
                row.appendChild(col);
            }

            let inpB = document.createElement("input");
            inpB.type = "number";
            inpB.name = "vectorB";
            inpB.step = "any";
            inpB.className = "form-control mb-2";
            inpB.placeholder = "b" + (i + 1);
            contB.appendChild(inpB);

            let inpX0 = document.createElement("input");
            inpX0.type = "number";
            inpX0.name = "x0";
            inpX0.step = "any";
            inpX0.className = "form-control mb-2";
            inpX0.placeholder = "x" + (i + 1) + "0";
            contX0.appendChild(inpX0);
        }
    }
</script>
</body>
</html>
